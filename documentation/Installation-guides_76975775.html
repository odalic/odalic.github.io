<!DOCTYPE html>
<html>
    <head>
        <title>ADEQUATE : Installation guides</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">ADEQUATE</a></span>
                            </li>
                                                    <li>
                                <span><a href="Odalic_71438906.html">Odalic</a></span>
                            </li>
                                                    <li>
                                <span><a href="ODALIC-Documentation_76973575.html">ODALIC Documentation</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ADEQUATE : Installation guides
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Václav Brodec</span>, last modified on Jun 01, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Odalic platform consists of three main components: the server application (<strong>Odalic Semantic Table Interpretation</strong>), the web client (<strong>Odalic UI</strong>), and finally the <strong>Odalic UnifiedViews plugin</strong>. Both the web client and the plugin require a running server to work properly.</p><h1 id="Installationguides-Serverinstallation">Server installation</h1><h2 id="Installationguides-Prerequisites"><span class="inline-comment-marker" data-ref="248c1735-5fb6-46ab-8f3e-6e07d5c60acf">Prerequisites</span></h2><ul><li>at least 4 GB RAM</li><li><a href="http://www.oracle.com/technetwork/java/javase/downloads/" class="external-link" rel="nofollow">Java Runtime Environment</a> version 8+</li><li><a href="http://tomcat.apache.org/" class="external-link" rel="nofollow">Apache Tomcat</a> servlet container version 8+</li><li><a href="https://maven.apache.org/" class="external-link" rel="nofollow">Apache Maven 3</a> (to build and install from the source files)</li><li>running SMTP server (optimally allowing secure communication) in order to send confirmation e-mails (<em>optional</em>)</li></ul><p>The server is platform independent and runs on any major operating system supporting Java Runtime Environment.</p><h2 id="Installationguides-server-deploymentDeployment"><span class="confluence-anchor-link" id="Installationguides-server-deployment"></span>Deployment</h2><p>There are basically two ways to install the server application: the user can either use a prepared web archive (<a href="https://en.wikipedia.org/wiki/WAR_(file_format)" class="external-link" rel="nofollow">WAR</a>) from the the <a href="Installation-disc-contents_76976064.html">installation disc</a>, or compile the server web archive file from the provided source files. In both cases the <span class="inline-comment-marker" data-ref="0f06568d-fdbf-4343-ab26-4a4bf1f9b3c3">produced</span> WAR file is to be deployed in a running Apache Tomcat instance.</p><p>Apart from the web archive, the server also needs access to a separate working directory <code>{<code>sti.home</code>}</code> with subdirectories <code>config</code> and <code>resources</code>. Its default version can be also obtained from the root of <a href="https://github.com/odalic/sti" class="external-link" rel="nofollow">server source repository</a> (files and directories other than <code>config</code> and <code>resources</code> are meant to build the project and are not needed in the working directory) or copied directly from the installation disc.</p><p>The Java Virtual Machine running the Tomcat itself has to be started with a system property cz.cuni.mff.xrg.odalic.sti set to a path leading to the main configuration file, e.g.:</p><pre> -Dcz.cuni.mff.xrg.odalic.sti={<code>sti.home</code>}/config/sti.properties</pre><p>where the <code>{<code>sti.home</code>}/config/sti.properties</code> is a location of the main configuration file.</p><p>The details of configuration are described in section <a href="Configuration_76975474.html">Configuration</a>, the minimum needed settings are the following (located in the main configuration file <code>config/sti.properties</code>):</p><ul><li><code>sti.home</code> - absolute path to the root working directory <code>{sti.home}</code>.</li><li><code>cz.cuni.mff.xrg.odalic.users.admin.email</code> - default (admin) user email (used as login)</li><li><code>cz.cuni.mff.xrg.odalic.users.admin.password</code> - default (admin) user password (can be changed later using the API)</li><li><code>cz.cuni.mff.xrg.odalic.db.file</code> - absolute path to a file (which will be created if not existing yet) keeping the state of the server</li></ul><p>In the <code>config/websearch.properties</code>, set the authorization token at <code>bing.key</code> to the Bing Web Search service, which can be obtained at <a href="https://azure.microsoft.com/cs-cz/services/cognitive-services/search/" class="external-link" rel="nofollow">https://azure.microsoft.com/cs-cz/services/cognitive-services/search/</a>.</p><p>Apart from these every used knowledge base (the source of Linked Data resources) has to be configured separately. More in <a href="Configuration_76975474.html">Configuration</a>.</p><h2 id="Installationguides-Buildingfromsourcefiles">Building from source files</h2><ol><li>Checkout the sources and accompanying resource from Git repository at <a href="https://github.com/odalic/sti" class="external-link" rel="nofollow">https://github.com/odalic/sti</a> or copy them from the installation disc.</li><li>Install the libraries in the <code>lib</code> directory by running the <code>mvninstall.bat</code> in the source files root directory (or in case of other OSs than Windows: running the few mvn commands present there manually), as these are not present in any public Maven repository.</li><li>Run <code>mvn install</code> in the root directory, all the sub-projects will be installed one by one and the produced .war will be placed in <code>odalic/target</code> subdirectory.</li><li>Copy the subdirectories <code>config</code> and <code>resources</code> (only these are needed during runtime) at a desired location and make the necessary changes in the main configuration file <code>sti.properties</code>, located in the <code>config</code> sub-directory and follow the rest of <a href="#Installationguides-server-deployment">Deployment section</a>.</li></ol><h3 id="Installationguides-BuildingJavadocdocumentation">Building Javadoc documentation</h3><p>The Javadoc documentation building is supported only for the <code>odalic</code> module of the server. To do that, navigate to source files repository subdirectory<code> odalic</code> and run <code>mvn javadoc:javadoc</code> to build the Javadoc files hirararchy in <code>odalic/target/site</code> or <code>mvn javadoc:jar</code> to generate a JAR packed Javadoc in the <code>target</code>. In any case, the installation disc already contains pre-generated Javadoc.</p><h2 id="Installationguides-Security">Security</h2><p>While the application provides means to secure privileged operations according to JWT standard <em>(JSON Web Tokens, more in <a href="Authentication-and-authorization_76976075.html">Authentication and authorization</a><a href="https://jwt.io/" class="external-link" rel="nofollow">)</a></em>, the requests exchanged between a client and the server are still vulnerable to eavesdropping and/or tampering. To prevent man-in-the-middle attack, we recommend using <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" class="external-link" rel="nofollow">Transport Layer Security</a> (TLS) protocol as a way of communicating with the server.</p><p>The server needs to be configured individually. If you are using Apache Tomcat, we recommend following the guidelines described on the official site <a href="https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html" class="external-link" rel="nofollow">https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html</a>. If you do decide to use the TLS protcol, a web client should be configured accordingly <em>(see Web client installation section below)</em>.</p><h2 id="Installationguides-Confirmatione-mailssetup">Confirmation e-mails set up</h2><p>In the default configuration the confirmation e-mails, which require the user to confirm the sign-up and password-changing process by following a sent hyperlink, are turned off by option <code>mail.confirmations = false</code> in the <code>sti.properties</code>. If the administrator chooses to the turn them on by setting the option to <code>true</code>, he or she has to set up the other options starting with <code>mail</code>. The confirmation e-mails require an already existing running SMTP server that the application can connect to using the provided mail options such as username, password, host, SMTP port and used standard socket factory (the one using encrypted connections is in the defaults, but can be left out when unprotected connection is used). The installation files already contain tested configuration using email.cz as example of a common freemail provider (sans the <code>password</code> and <code>login</code>).</p><p>If the mail is not properly configured the sign-up user may not obtain the required confirmation links, thus preventing them from using the application at all.</p><h1 id="Installationguides-Webclientinstallation">Web client installation</h1><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">The web client, being a single page application, works <em>almost</em> &quot;out of the box&quot;, if a proper browser, with HTML5 support and JavaScript enabled, is used. However, to ensure the best experience, steps mentioned below should be followed:</span></span></p><h2 id="Installationguides-Settingupawebserverforthewebclient">Setting up a web server for the web client</h2><p>The web client should reside in a web server of your choice. The server API in the default setting allows to make cross-origin requests. In order to mitigate the risk of exploitation or in case of any troubles concerning the <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy" class="external-link" rel="nofollow">Same-origin policy</a> protection, modify the appropriate headers in <code>CorsResponseFilter.java</code> from the server source, according to the location of your client instance and recompile the server. This is a good place though to remind you NOT to use or rely on Odalic in situations when your money and life would depend on it!<span style="color: rgb(255,0,0);"><br/></span></p><h2 id="Installationguides-Configuringthesign-upandpassword-resetconfirmationaddressontheserver">Configuring the sign-up and password-reset confirmation address on the server</h2><p>Specified in detail in <a href="Configuration_76975474.html">Configuration</a> section, the following properties need to be correctly configured in the main configuration file, <code>sti.properties</code>, if you want to use the default web client application to respond to the confirmation URLs:</p><ul><li><code>cz.cuni.mff.xrg<span style="color: rgb(0,0,0);">.odalic.users.signup.url</span></code><span style="color: rgb(0,0,0);"> - URL of the sign-up confirmation link <em>(received by a user on a provided e-mail address during sign-up process)</em></span></li><li><span style="color: rgb(0,0,0);"><code>cz.cuni.mff.xrg.odalic.users.reset.url </code>- URL of the password-reset confirmation link <em>(received by a user on his/her previously registered e-mail address)</em></span></li></ul><p>In case you are using the default web application, different web client's screens are accessible by visiting URL <code>.../index.html<strong>#/screenname</strong></code>, <code>screenname</code> being name of the screen visited, and<code> index.html </code>being entry point of the web client application.</p><p>The token received for sign-up confirmation is processed at <code>.../index.html#/signup/<strong>token</strong></code>, while the token for password-reset is handled at <code>.../index.html#/chngpasswd/<strong>token</strong></code> (<code>token</code> being the actual token). Therefore an exemplary relevant fragment of the configuration may look like this <em>(we assume the web client is accessible at URL <span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);"><a href="http://localhost:8181/odalic-ui/index.html#/signup/%s" class="external-link" rel="nofollow">http://localhost:8080/</a></span></span>, or, more specifically, at <span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);"><a href="http://localhost:8181/odalic-ui/index.html#/signup/%s" class="external-link" rel="nofollow">http://localhost:8080/index.html</a></span></span>)</em>:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; first-line: 120; theme: Confluence" data-theme="Confluence"># URL format for a sing-up confirmation.
cz.cuni.mff.xrg.odalic.users.signup.url=http://localhost:8080/index.html#/signup/%s
# URL format for a password setting confirmation.
cz.cuni.mff.xrg.odalic.users.reset.url=http://localhost:8080/index.html#/chngpasswd/%s</pre>
</div></div><p>Naturally if you roll your own application based on the Odalic server, you are free to provide entirely different formatting strings for the URLs (as long as they are valid and contain the place-holder <code>%s</code> to place the generated token in).</p><h2 id="Installationguides-Configuringaddressoftheserverintheclient"><span class="inline-comment-marker" data-ref="528e6e0e-d546-4abb-a04e-bae18724e4d1">Configuring address of the server in the client</span></h2><p>Assume the <code>./odalic-ui/</code> is a path of the folder the web client application is located at.</p><p>Open <code>./odalic-ui/config.txt</code> file in a text editor. Locate the following piece of code:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">[server]
address=http://localhost:8080/odalic/</pre>
</div></div><p>Replace it with the following lines of code:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">[server]
address=ActualServerAddress</pre>
</div></div><p>Where <code>ActualServerAddress</code> is the actual server address, for example <a href="http://localhost:8080/" class="external-link" rel="nofollow">http://localhost:8080/</a>.</p><p>Note that if the server uses TLS protocol as a way of securing communication with the client, <code>https://</code> should be used instead of <code>http://</code>.</p><h2 id="Installationguides-InstallingLodLiveapplicationcomponent">Installing LodLive application component</h2><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">The web client uses optional LodLive application component as its RDF resource browser for supported knowledge bases. </span></span></p><ol><li><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">Let's assume the <code>./odalic/odalic-ui/</code> is a path of the folder the web client application is located at. </span></span></li><li><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">Navigate to<code> ./<span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);"><code>odalic</code></span></span>/</code> folder. </span></span></li><li><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">Copy the <code>LodLive</code> directory from the installation disc or checked-out from the <a href="https://github.com/odalic/LodLive" class="external-link" rel="nofollow">repository hosting the version modified to work with Odalic UI</a> and paste it in<span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);"><code style="color: rgb(0,0,0);"> ./<span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);"><code>odalic</code></span></span>/</code></span></span> <span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">folder</span></span>.</span></span></li></ol><h2 id="Installationguides-Supportedbrowsers"><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">Supported browsers<br/></span></span></h2><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">The web client can be accessed using any of the popular internet browsers <span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">with HTML5 support</span></span>. Additionally, it is necessary for the browser to support <a href="https://www.w3.org/Graphics/SVG/" class="external-link" rel="nofollow">SVG</a> elements.</span></span></p><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">Some of the supported browsers are:</span></span></p><ul><li>Microsoft<sup>®</sup> Internet Explorer 11</li><li>Microsoft<sup>®</sup> Edge 14 <em>(and newer)</em></li><li>Mozilla Firefox 50 <em>(and newer)</em></li><li>Google<sup>®</sup> Chrome 49 <em>(and newer)</em></li></ul><h1 id="Installationguides-plugin-installationPlugininstallation"><span class="confluence-anchor-link" id="Installationguides-plugin-installation"></span>Plugin installation</h1><h2 id="Installationguides-Deployment">Deployment</h2><p>As described in <a href="https://grips.semantic-web.at/display/UDDOC/Dealing+with+OSGi+dependency+issues+when+DPU+is+imported">Dealing with OSGi dependency issues when DPU is imported</a>, <a href="https://grips.semantic-web.at/display/UDDOC/Introduction">UnifiedViews</a> plugins are packed as OSGi bundles and as such they contain their dependences in embedded JARs or declare them in their manifest. In the latter case it is the user's obligation to make them available to the chosen OSGi container. Apart from UnifiedViews version <a href="https://github.com/UnifiedViews/Core/releases" class="external-link" rel="nofollow">accepting plugins of version 2.1.7</a>, the Odalic plugin requires the following:</p><ul><li>jersey-all 2.22.2 ( <a href="http://central.maven.org/maven2/com/eclipsesource/jaxrs/jersey-all/2.22.2/jersey-all-2.22.2.jar" class="external-link" rel="nofollow">http://central.maven.org/maven2/com/eclipsesource/jaxrs/jersey-all/2.22.2/jersey-all-2.22.2.jar</a> )</li><li>jackson-core 2.8.6 ( <a href="http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.8.6/jackson-core-2.8.6.jar" class="external-link" rel="nofollow">http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.8.6/jackson-core-2.8.6.jar</a> )</li><li>jackson-databind 2.8.6 ( <a href="http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.8.6/jackson-databind-2.8.6.jar" class="external-link" rel="nofollow">http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.8.6/jackson-databind-2.8.6.jar</a> )</li><li>jackson-annotations 2.8.6 ( <a href="http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.8.6/jackson-annotations-2.8.6.jar" class="external-link" rel="nofollow">http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.8.6/jackson-annotations-2.8.6.jar</a> )</li></ul><p>Copy them from the installation disc (or download them from the URLs) to <code>lib</code> sub-directory at the path specified with key <code>module.path</code> in the UnifiedViews frontend configuration.</p><p>Follow the instructions to create DPU Template at <a href="https://grips.semantic-web.at/display/UDDOC/DPU+Template+Creation">DPU Template Creation</a>, where the uploaded file will be the <code>t-odalic-{version}.jar</code> from the installation disc or the one built from the source files as described in the following <a href="#Installationguides-plugin-building">section</a>. To set up the template, follow the instructions in the <a href="UnifiedViews-DPU_76976689.html">plugin user manual</a>.</p><h2 id="Installationguides-plugin-buildingBuildingfromsourcefiles"><span class="confluence-anchor-link" id="Installationguides-plugin-building"></span>Building from source files</h2><ol><li>Checkout the sources from Git repository at <a href="https://github.com/odalic/odalic-uv-plugin" class="external-link" rel="nofollow">https://github.com/odalic/odalic-uv-plugin</a> or copy them from the installation disc.</li><li>Run <code>mvn package</code> in the <code>t-odalic</code> directory and the produced<code> t-odalic-{version}.jar</code> OSGi plugin bundle will be placed in <code>t-odalic/target</code> directory.</li></ol>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 01, 2017 13:30</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
